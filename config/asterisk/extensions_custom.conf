;=====================================================
; Custom Dialplan for AI-PBX Gateway
;=====================================================
; This file should be placed in:
; /etc/asterisk/extensions_custom.conf
;
; After adding this file, reload Asterisk dialplan:
; asterisk -rx "dialplan reload"
;=====================================================

[ai-bridge-context]
;-----------------------------------------------------
; AI Bridge Entry Point
; Dial 777 to connect to the AI voice pipeline
;-----------------------------------------------------
exten => 777,1,NoOp(=== AI Bridge Call from ${CALLERID(num)} ===)
 same => n,Answer()
 same => n,Wait(1)
 same => n,NoOp(Transferring to Stasis application: ai-bridge)
 same => n,Stasis(ai-bridge,${CALLERID(num)},${UNIQUEID})
 same => n,NoOp(Returned from Stasis)
 same => n,Hangup()

;-----------------------------------------------------
; Alternative AI Bridge with IVR greeting
;-----------------------------------------------------
exten => 778,1,NoOp(=== AI Bridge with IVR ===)
 same => n,Answer()
 same => n,Wait(1)
 same => n,Playback(hello-world)
 same => n,Playback(pls-hold-while-try)
 same => n,Stasis(ai-bridge,ivr,${CALLERID(num)})
 same => n,Hangup()

;-----------------------------------------------------
; Test Extension - Echo Test
;-----------------------------------------------------
exten => 600,1,NoOp(=== Echo Test ===)
 same => n,Answer()
 same => n,Playback(demo-echotest)
 same => n,Echo()
 same => n,Hangup()

;=====================================================
; Include this context in your inbound routes
;=====================================================
; In FreePBX, go to:
; Settings -> Asterisk Custom Config
; Add to extensions_custom.conf:
;
; [from-internal-custom]
; include => ai-bridge-context
;
; Or add via GUI in Admin -> Custom Contexts
;=====================================================
